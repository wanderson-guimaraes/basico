!function(e){"use strict";function t(){"console"in window&&console.log.apply(console,arguments)}function a(){"console"in window&&console.warn.apply(console,arguments)}function i(){return{title:"",headline:"",copy_text:"",parts:[{title:"",blocks:[]}]}}function l(t,a){e('<div id="fw-alert" style="background-color:'+(a?"#4caf50":"#f44336")+'">'+t+"</div>").hide().appendTo("#wpbody-content").slideDown().delay(3e3).slideUp()}function r(e){var t='<div class="fw-block-action fw-block-hndle">';return t+='<i class="fa fa-arrows fw-move-block fw-block-hndle" aria-hidden="true"></i>',t+="<h4>"+e+"</h4>",t+="</div>"}function n(e){var t='<div class="fw-radio-option-element" data-type="header"><label>'+wizard.i18n.label+"</label>";return t+='<input type="text" class="fw-radio-header fw-block-label" value="'+e+'"></input>',t+="</div>"}function o(e,t){var a='<div class="fw-radio-option-element" data-type="option">';return a+='<input type="text" class="fw-radio-option" placeholder="'+wizard.i18n.radio.option+" "+t+'" value="'+e+'"></input>',a+='<div class="fw-remove-radio-option"><i class="fa fa-minus-circle" aria-hidden="true"></i></div></div>'}function c(e){t("radio",e);var a,i,l,r=0,c="";for(c+='<div class="fw-radio-option-container">',a=0,i=e.elements.length;a<i;a++)t("element",l=e.elements[a]),"option"===l.type?(1==a&&(c+="<label>"+wizard.i18n.radio.options+"</label>"),c+=o(l.value,1+r++)):c+=n(l.value);return c+="</div>",c+='<button class="fw-radio-add"><i class="fa fa-plus" aria-hidden="true"></i> '+wizard.i18n.radio.addOption+"</button><br/>",c+='<label><input type="checkbox" class="fw-required"'+ee(e.required)+"/> "+wizard.i18n.required+"</label>","true"==e.multichoice?c+='<label><input type="checkbox" class="fw-radio-multichoice" checked/>'+wizard.i18n.radio.multiple+' <i class="fa fa-info-circle" aria-hidden="true" title="'+wizard.i18n.tooltips.multiChoice+'"></i></label>':c+='<label><input type="checkbox" class="fw-radio-multichoice"/>'+wizard.i18n.radio.multiple+' <i class="fa fa-info-circle" aria-hidden="true" title="'+wizard.i18n.tooltips.multiChoice+'"></i></label>',c}function s(e){t("select",e);var a=0,i="",l=wizard.i18n.select.placeholder?wizard.i18n.select.placeholder:"";for(i+='<div class="fw-select-option-container">',i+="<label>"+wizard.i18n.label+"</label>",i+='<input type="text" class="fw-block-label" value="'+e.label+'"></input>',i+="<label>"+l+"</label>",i+='<input type="text" class="fw-select-placeholder" value="'+e.placeholder+'"></input>',i+="<label>"+wizard.i18n.select.options+"</label>",i+='<textarea class="fw-select-options" rows="4" cols="50">',a=0;a<e.elements.length;a++)i+=e.elements[a]+"\n";return i+="</textarea>",i+="</div>",i+='<label><input type="checkbox" class="fw-select-search"'+ee(e.search)+"/>"+wizard.i18n.select.search+"</label>",i+='<label><input type="checkbox" class="fw-required"'+ee(e.required)+"/> "+wizard.i18n.required+"</label>"}function d(e){t("checkbox",e);var a="";return a+="<label>"+wizard.i18n.label+"</label>",a+='<input type="text" class="fw-text-label fw-block-label" placeholder="'+wizard.i18n.label+'" value="'+e.label+'"></input><br/>',a+='<label><input type="checkbox" class="fw-required"'+ee(e.required)+"/>"+wizard.i18n.required+"</label>"}function f(e){t("textInput",e);var a="";return a+="<label>"+wizard.i18n.label+"</label>",a+='<input type="text" class="fw-text-label fw-block-label" placeholder="'+wizard.i18n.label+'" value="'+e.label+'"></input><br/>',a+='<label><input type="checkbox" class="fw-required"'+ee(e.required)+"/>"+wizard.i18n.required+"</label>"}function p(e){var t="";return t+="<label>"+wizard.i18n.label+"</label>",t+='<input type="text" class="fw-text-label fw-block-label" placeholder="'+wizard.i18n.label+'" value="'+e.label+'"></input><br/>',t+='<label><input type="checkbox" class="fw-required"'+ee(e.required)+"/>"+wizard.i18n.required+"</label>"}function u(e){var t="";return t+="<label>"+wizard.i18n.label+"</label>",t+='<input type="text" class="fw-text-label fw-block-label" placeholder="'+wizard.i18n.label+'" value="'+e.label+'"></input><br/>',t+='<label><input type="checkbox" class="fw-required"'+ee(e.required)+"/>"+wizard.i18n.required+"</label>"}function b(e){var t="";return t+="<label>"+wizard.i18n.label+"</label>",t+='<input type="text" class="fw-text-label fw-block-label" placeholder="'+wizard.i18n.label+'" value="'+e.label+'"></input><br/>',t+="<label>"+wizard.i18n.dateformat+'<a target="_blank" href="http://t1m0n.name/air-datepicker/docs/#sub-section-9"><i class="fa fa-info-circle" aria-hidden="true" title="'+wizard.i18n.tooltips.dateformat+'"></i></a></label>',t+='<input type="text" class="fw-date-format fw-block-label" placeholder="'+wizard.i18n.dateformat+'" value="'+(e.format?e.format:"yy-mm-dd")+'" ></input><br/>',t+='<label><input type="checkbox" class="fw-required"'+ee(e.required)+"/>"+wizard.i18n.required+"</label>"}function w(e){t("textArea",e);var a="";return a+="<label>"+wizard.i18n.label+"</label>",a+='<input type="text" class="fw-textarea-label fw-block-label" placeholder="'+wizard.i18n.label+'" value="'+e.label+'"></input><br/>',a+='<label><input type="checkbox" class="fw-required"'+ee(e.required)+"/>"+wizard.i18n.required+"</label>"}function v(e){var t="";return t+="<label>"+wizard.i18n.paragraph.textHtml+' <i class="fa fa-info-circle" aria-hidden="true" title="'+wizard.i18n.tooltips.paragraph+'"></i></label>',t+='<textarea class="fw-paragraph-text fw-block-label" placeholder="'+wizard.i18n.paragraph.text+'">'+(e.text?e.text:"")+"</textarea>"}function h(e){var t="";return t+='<label><input type="checkbox" class="fw-required"'+ee(e.required)+"/>"+wizard.i18n.required+"</label>",t+='<p class="msfp-registration-info">'+wizard.i18n.registration.info+"</p>",t+='<label class="msfp-registration-option"><input type="checkbox" class="msfp-registration-email" checked disabled="disabled"/>'+wizard.i18n.registration.email+"</label>",t+='<label class="msfp-registration-option"><input type="checkbox" class="msfp-registration-username" checked disabled="disabled"/>'+wizard.i18n.registration.username+"</label>",t+='<label class="msfp-registration-option"><input type="checkbox" class="msfp-registration-password"'+ee(e.password)+"/>"+wizard.i18n.registration.password+"</label>",t+='<label class="msfp-registration-option"><input type="checkbox" class="msfp-registration-firstname"'+ee(e.firstname)+"/>"+wizard.i18n.registration.firstname+"</label>",t+='<label class="msfp-registration-option"><input type="checkbox" class="msfp-registration-lastname"'+ee(e.lastname)+"/>"+wizard.i18n.registration.lastname+"</label>",t+='<label class="msfp-registration-option"><input type="checkbox" class="msfp-registration-website"'+ee(e.website)+"/>"+wizard.i18n.registration.website+"</label>",t+='<label class="msfp-registration-option"><input type="checkbox" class="msfp-registration-bio"'+ee(e.bio)+"/>"+wizard.i18n.registration.bio+"</label>"}function m(e){t("block",e);var a='<div class="fw-step-block" data-type="'+e.type+'" >';switch(a+='<div class="fw-block-controls">',a+='<i class="fa fa-remove fw-remove-block" title="'+wizard.i18n.tooltips.removeBlock+'" aria-hidden="true"></i>',a+='<i class="fa fa-caret-up fw-toggle-block" aria-hidden="true"></i>',a+="</div>",a+=r(e.type),a+='<div class="fw-block-fields">',e.type){case"radio":e.elements||(e.elements=[{type:"header",value:""},{type:"option",value:""}]),a+=c(e);break;case"select":e.elements||(e.elements=[]),a+=s(e);break;case"checkbox":a+=d(e);break;case"text":a+=f(e);break;case"email":a+=p(e);break;case"file":a+=u(e);break;case"date":a+=b(e);break;case"textarea":a+=w(e);break;case"paragraph":a+=v(e);break;case"registration":a+=h(e)}return a+="</div>",a+='<div class="fw-clearfix"></div>',a+="</div>"}function k(e){var t,a,i="";for(t=0,a=e.length;t<a;t++)if("conditional"==e[t].type){i+=m(e[t].block);var l={prec_block_id:e[t].prec_block_id,prec_operator:e[t].prec_operator,prec_value:e[t].prec_value,visible:e[t].visible};i+='<input class="msf-block-meta" name="msf-block-meta-'+t+'" type="hidden" value="'+encodeURI(JSON.stringify(l))+'">'}else i+=m(e[t]);return i}function g(e,a){t("part",e);var i='<div class="'+a+'">';return i+='<div class="fw-section-hndle"><i class="fa fa-arrows"></i></div>',i+='<input type="text" class="fw-part-title" value="'+e.title+'" placeholder="'+wizard.i18n.partTitle+'"></input>',i+='<div class="fw-remove-part" title="'+wizard.i18n.removeSection+'">',i+='<i class="fa fa-remove"></i>',i+='</div><div class="inside connectedSortable">',i+=k(e.blocks),i+='</div><div class="fw-add-element">',i+='<a href="#TB_inline?width=400&height=200&inlineId=fw-thickbox-content" class="thickbox"><i class="fa fa-plus"></i> '+wizard.i18n.addElement+"</a>",i+="</div>",i+="</div>"}function y(e,t){return"fw-step-part"}function x(e){var t,a=e.length,i='<div><div class="fw-parts-header"><h3>Sections</h3></div>';for(i+='<div class="fw-column-buttons">',i+='<button type="button" class="fw-button-one-column"><i class="fa fa-align-justify"></i></button>',i+='<button type="button" class="fw-button-two-columns"><i class="fa fa-align-justify"></i> <i class="fa fa-align-justify"></i></button>',i+="</div>",i+='<div class="fw-parts-container">',t=0,a=e.length;t<a;t++){var l=y(t,a);i+=g(e[t],l)}return i+="</div>",i+='<div class="fw-parts-footer">',i+='<a class="fw-add-part"><i class="fa fa-plus"></i> '+wizard.i18n.addSection+"</a>",i+="</div>",i+="</div>"}function z(e,t){var a="fw-headline-"+t,i="fw-copy-text-"+t,l='<div class="fw-step"><div class="form-wrap">';return l+='<div class="input form-field">',l+='<label for="'+("fw-title-"+t)+'"><b>'+wizard.i18n.title+"</b>",l+='<i class="fa fa-info-circle" aria-hidden="true" title="'+wizard.i18n.tooltips.title+'"></i></label>',l+='<input type="text" class="fw-step-title" value="'+e.title+'"></input>',l+="</div>",l+='<div class="input form-field">',l+='<label for="'+a+'"><b>'+wizard.i18n.headline+"</b>",l+='<i class="fa fa-info-circle" aria-hidden="true" title="'+wizard.i18n.tooltips.headline+'"></i></label>',l+='<input type="text" class="fw-step-headline" value="'+e.headline+'"></input>',l+="</div>",l+='<div class="input form-field">',l+='<label for="'+i+'"><b>'+wizard.i18n.copyText+"</b>",l+='<i class="fa fa-info-circle" aria-hidden="true" title="'+wizard.i18n.copyText+'"></i></label>',l+='<input type="text" class="fw-step-copy_text" value="'+e.copy_text+'"></input>',l+="</div>",l+='<div class="fw-step-parts">'+x(e.parts)+"</div>",l+='</div><div class="fw-clearfix"></div></div>'}function q(e){var t='<div class="postbox">';return t+='<div class="fw-movediv hndle ui-sortable-handle"><i class="fa fa-arrows"></i></div>',t+='<h1 class="fw-step-h1 hndle ui-sortable-handle"><span>',t+=e.title+"</span></h1>",t+='<div class="fw-step-controls">',t+='<i class="fa fa-remove fw-remove-step" title="'+wizard.i18n.tooltips.removeStep+'" aria-hidden="true"></i>',t+='<i class="fa fa-caret-up fw-toggle-step" aria-hidden="true"></i>',t+='<i class="fa fa-files-o fw-duplicate-step" title="duplicate step" aria-hidden="true"></i>',t+="</div>",t+='<div class="fw-clearfix"></div>',t+=z(e),t+='<div class="fw-clearfix"></div>',t+="</div>"}function _(t){t&&(t.thankyou&&e(".fw-settings-thankyou").val(t.thankyou),t.subject&&e(".fw-mail-subject").val(t.subject),t.to&&e(".fw-mail-to").val(t.to),t.frommail&&e(".fw-mail-from-mail").val(t.frommail),t.fromname&&e(".fw-mail-from-name").val(t.fromname),t.header&&e(".fw-mail-header").val(t.header))}function C(t){var a,i,l='<div class="postbox-container"><div class="metabox-holder"><div class="meta-box-sortables">';for(a=0,i=t.length;a<i;a++)l+=q(t[a],a);l+="</div>",l+='<a class="fw-element-step"><i class="fa fa-plus"></i> '+wizard.i18n.addStep+"</a>",l+="</div></div>",e(ce).html(l)}function S(e){var t={},a=t.type=e.attr("data-type");return"option"===a?t.value=e.find(".fw-radio-option").val():"header"===a&&(t.value=e.find(".fw-radio-header").val()),t}function T(t,a){var i=a.elements=[];t.find(".fw-radio-option-element").each(function(t,a){i.push(S(e(a)))}),a.required=t.find(".fw-required").prop("checked"),a.multichoice=t.find(".fw-radio-multichoice").prop("checked")}function j(e,t){var a=e.find(".fw-select-options").val().split("\n");t.required=e.find(".fw-required").prop("checked"),t.search=e.find(".fw-select-search").prop("checked"),t.label=e.find(".fw-block-label").val(),t.placeholder=e.find(".fw-select-placeholder").val(),t.elements=a.filter(function(e){return""!==e&&" "!==e})}function O(e,t){t.label=e.find(".fw-text-label").val(),t.required=e.find(".fw-required").prop("checked")}function U(e,t){t.label=e.find(".fw-text-label").val(),t.required=e.find(".fw-required").prop("checked")}function A(e,t){t.label=e.find(".fw-text-label").val(),t.required=e.find(".fw-required").prop("checked")}function D(e,t){t.label=e.find(".fw-text-label").val(),t.required=e.find(".fw-required").prop("checked")}function B(e,t){t.label=e.find(".fw-text-label").val(),t.format=e.find(".fw-date-format").val(),t.required=e.find(".fw-required").prop("checked")}function E(e,t){t.label=e.find(".fw-textarea-label").val(),t.required=e.find(".fw-required").prop("checked")}function F(e,t){t.text=e.find(".fw-paragraph-text").val()}function I(e,t){t.required=e.find(".fw-required").prop("checked"),t.password=e.find(".msfp-registration-password").prop("checked"),t.firstname=e.find(".msfp-registration-firstname").prop("checked"),t.lastname=e.find(".msfp-registration-lastname").prop("checked"),t.website=e.find(".msfp-registration-website").prop("checked"),t.bio=e.find(".msfp-registration-bio").prop("checked")}function W(e){var t={};return t.type="conditional",t.visible=e.find(".msfp-conditional-visible").val(),t.prec_block_id=e.find(".msfp-conditional-prec-block-id").val(),t.prec_operator=e.find(".msfp-conditional-prec-op").val(),t.prec_value=e.find(".msfp-conditional-prec-value").val(),t.block=Z(e),t}function Z(e){var t={};switch(t.type=e.attr("data-type")){case"radio":T(e,t);break;case"select":j(e,t);break;case"checkbox":O(e,t);break;case"text":U(e,t);break;case"email":A(e,t);break;case"file":D(e,t);break;case"date":B(e,t);break;case"textarea":E(e,t);break;case"paragraph":F(e,t);break;case"registration":I(e,t)}return t}function J(t){var a={};a.title=t.find(".fw-part-title").val();var i=a.blocks=[];return t.find(".fw-step-block").each(function(t,a){var l=e(a);l.find(".msfp-conditional").prop("checked")?i.push(W(l)):i.push(Z(l))}),a}function M(t){var a={};a.title=t.find(".fw-step-title").val(),a.headline=t.find(".fw-step-headline").val(),a.copy_text=t.find(".fw-step-copy_text").val();var i=a.parts=[];return t.find(".fw-step-part").each(function(t,a){i.push(J(e(a)))}),a}function N(){var t={};return t.thankyou=e(".fw-settings-thankyou").val(),t.to=e(".fw-mail-to").val(),t.frommail=e(".fw-mail-from-mail").val(),t.fromname=e(".fw-mail-from-name").val(),t.subject=e(".fw-mail-subject").val(),t.header=e(".fw-mail-header").val(),t}function P(e){return!!e&&/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}function H(t){var a=!0;return P(t.to)?t.subject||(a=!1,e("#fw-nav-settings").trigger("click"),l(wizard.i18n.alerts.noSubject,!1)):(a=!1,e("#fw-nav-settings").trigger("click"),l(wizard.i18n.alerts.invalidEmail,!1)),a}function Q(e){for(var t=!0,a=0;a<e.length;a++)if(e[a].title)for(var i=0;i<e[a].parts.length;i++){""===e[a].parts[i].title&&(t=!1,l(wizard.i18n.alerts.noSectionTitle,!1));for(var r=0;r<e[a].parts[i].blocks.length;r++)e[a].parts[i].blocks[r]}else t=!1,l(wizard.i18n.alerts.noStepTitle,!1);return t}function R(e){var t=!0;return""===e.title?(t=!1,l(wizard.i18n.alerts.noFormTitle,!1)):t=Q(e.wizard.steps)&&H(e.wizard.settings),t}function Y(){var a=e(ce),i=e(".fw-wizard-title").val(),r={wizard:{}};r.wizard.title=i,r.wizard.steps=[],r.wizard.settings=N();var n=a.find(".fw-step");n.each(function(t,a){n.length;r.wizard.steps.push(M(e(a)))}),r.wizard.steps.push(),R(r)&&(t("save",r),e.ajax({type:"POST",url:wizard.ajaxurl,dataType:"json",data:{action:"fw_wizard_save",data:r,nonce:wizard.nonce,id:wizard.id},success:function(e){l(e.data.msg,e.success)},error:function(e){t("fail",arguments),t("response",e)}}))}function $(){e(".meta-box-sortables").sortable({opacity:.6,revert:!0,cursor:"move",handle:".hndle",tolerance:"pointer",placeholder:"fw-block-placeholder",start:function(t,a){var i=e(a.item).height();e(".fw-block-placeholder").height(i)},update:function(t,i){a("sortables update",t,i),e(i.item).removeAttr("style"),$(),G()}}),e(".fw-step-part .inside").sortable({opacity:.6,cursor:"move",connectWith:".connectedSortable",handle:".fw-block-hndle",tolerance:"intersect",placeholder:"fw-block-placeholder",revert:100,start:function(t,a){var i=e(a.item).height(),l=e(".fw-block-placholder");l.height(i),l.attr("data-type",a.item.attr("data-type"))},update:function(t,i){a("block sortables update",t,i);var r=e(i.item).attr("data-type");e(i.item).is(".fw-draggable-block")&&("registration"===r&&te()?(l("Only one registration block allowed!",!1),e(i.item).remove()):e(i.item).replaceWith(e(m({type:r,label:""})))),$(),G(),oe(),msfp&&setupConditionals()}}),e(".fw-parts-container").sortable({opacity:.6,cursor:"move",connectWith:".fw-parts-container",handle:".fw-section-hndle",tolerance:"intersect",placeholder:"fw-section-placeholder",revert:100,start:function(t,a){var i=e(a.item).height();e(".fw-section-placeholder").height(i)},update:function(e,t){$(),G(),oe()}});e(se+" .fw-draggable-block").draggable({connectToSortable:".fw-step-part .inside",revert:"invalid",helper:"clone",cursor:"move"}),e(ce).find(".fw-step-title").on("change input",K)}function G(){e(".fa-info-circle").tooltip(),e(".fw-remove-step").tooltip(),e(".fw-duplicate-step").tooltip(),e(".fw-remove-part").tooltip(),e(".fw-remove-block").tooltip(),e(".hndle.ui-sortable-handle").tooltip()}function K(a){var i=e(this);t("titleOnChangeU",i.val()),i.closest(".postbox").find("h1 > span").html(i.val())}function L(a){a.find('.fw-radio-option-element[data-type="option"] > label').each(function(a,i){t("updateOptions",i),e(i).html("Option "+(a+1))})}function V(t){var a=e(".fw-step").length;if(a<5||msfp)if(a<10){var i=e(q(t));i.appendTo(e(ce).find(".meta-box-sortables")),oe(),$(),ne(),a>0&&e("html, body").animate({scrollTop:e(document).height()-i.height()-180},500)}else l(wizard.i18n.alerts.onlyTen,!1);else l(wizard.i18n.alerts.onlyFive,!1)}function X(e){var t=M(e);t.title+=" (COPY)",V(t)}function ee(e){var t="";return"true"==e&&(t="checked"),t}function te(){var t=!1;return e(".fw-step-block").each(function(a,i){"registration"==e(i).attr("data-type")&&(t=!0)}),t}function ae(t){var a=t.target,i=g({title:"",blocks:[]},"fw-step-part");e(a).closest(".fw-step-parts").find(".fw-parts-container").append(i),e(".fw-remove-part").click(function(e){le(e)}),ne()}function ie(){var t=e(this).closest(".postbox");!0===confirm(wizard.i18n.alerts.reallyDeleteStep)&&t.slideUp(700,function(){t.remove()})}function le(t){var a=e(t.target).closest(".fw-step-part");!0===confirm(wizard.i18n.alerts.reallyDeleteSection)&&a.slideUp(500,function(){a.remove()})}function re(t){var a=e(t.target).closest(".fw-step-block"),i=a.find(".fw-block-label").val();!0===confirm(wizard.i18n.alerts.reallyDeleteBlock+"\n\n"+i)&&a.slideUp(300,function(){a.remove()})}function ne(){e(".thickbox").click(function(t){e("#fw-thickbox-radio").unbind("click").click(function(a){tb_remove();var i=e(m({type:"radio"}));e(t.target).parents(".fw-step-part").find(".inside").append(i),oe()}),e("#fw-thickbox-select").unbind("click").click(function(a){tb_remove();var i=e(m({type:"select",label:""}));e(t.target).parents(".fw-step-part").find(".inside").append(i),oe()}),e("#fw-thickbox-text").unbind("click").click(function(a){tb_remove();var i=e(m({type:"text",label:"",value:""}));e(t.target).parents(".fw-step-part").find(".inside").append(i),oe()}),e("#fw-thickbox-email").unbind("click").click(function(a){tb_remove();var i=e(m({type:"email",label:"",value:""}));e(t.target).parents(".fw-step-part").find(".inside").append(i),oe()}),e("#fw-thickbox-fileupload").unbind("click").click(function(a){tb_remove();var i=e(m({type:"file",label:"",value:""}));e(t.target).parents(".fw-step-part").find(".inside").append(i),oe()}),e("#fw-thickbox-textarea").unbind("click").click(function(a){tb_remove();var i=e(m({type:"textarea",label:"",value:""}));e(t.target).parents(".fw-step-part").find(".inside").append(i),oe()}),e("#fw-thickbox-date").unbind("click").click(function(a){tb_remove();var i=e(m({type:"date",label:"",format:"yy-mm-dd"}));e(t.target).parents(".fw-step-part").find(".inside").append(i),oe()}),e("#fw-thickbox-paragraph").unbind("click").click(function(a){tb_remove();var i=e(m({type:"paragraph",text:""}));e(t.target).parents(".fw-step-part").find(".inside").append(i),oe()}),e("#fw-thickbox-registration").unbind("click").click(function(a){tb_remove();var i=e(m({type:"registration",label:"",value:""})),r=e(t.target).parents(".fw-step-part");te()?l("Only one registration block allowed!",!1):r.find(".inside").append(i),oe()})})}function oe(){e(".fw-element-step").unbind("click").click(function(e){V(i())}),e(".fw-duplicate-step").unbind("click").click(function(t){X(e(this).parent().parent().find(".fw-step"))}),e(".fw-add-part").unbind("click").click(function(e){ae(e),$()}),e(".fw-toggle-step").unbind("click").click(function(t){e(this).parent().parent().find(".fw-step").slideToggle(),e(this).toggleClass("fw-icon-rotated")}),e(".fw-remove-part").unbind("click").click(function(e){le(e)}),e(".fw-remove-block").unbind("click").click(function(e){re(e)}),e(".fw-toggle-block").unbind("click").click(function(t){var a=e(this).parent().parent();if(a.toggleClass("fw-block-collapsed"),a.hasClass("fw-block-collapsed")){var i=a.find(".fw-block-label").val();a.find("h4").text(i),e(this).addClass("fw-icon-rotated")}else{var l=a.data("type");a.find("h4").text(l),e(this).removeClass("fw-icon-rotated")}})}var ce="#fw-wizard-container",se="#fw-elements-container";e(document).ready(function(){try{var l=JSON.parse(wizard.json),r=e(ce);l.wizard.title?e(".fw-wizard-title").val(l.wizard.title):e(".fw-wizard-title").val("My Multi Step Form"),C(l.wizard.steps&&l.wizard.steps.length>0?l.wizard.steps:[i()]),_(l.wizard.settings),e(".fw-button-save").click(Y),e(window).scroll(function(){var t=e(".nav-tab-wrapper").height()+19;e(this).scrollTop()>t?e(se).addClass("fw-sticky"):e(se).removeClass("fw-sticky")}),r.on("click",".postbox .handlediv",function(){e(this).closest(".postbox").toggleClass("closed")}),r.on("click",".fw-radio-add",function(){var t=e(this).prev(".fw-radio-option-container"),a=o("",t.children(".fw-radio-option-element").length);e(a).appendTo(t),L(t)}),r.on("click",".fw-remove-radio-option",function(){t("remove on click");var a=e(this),i=a.closest(".fw-radio-option-container");a.closest(".fw-radio-option-element").remove(),L(i)}),r.on("click",".fw-remove-step",ie),$(),G(),ne(),oe(),e("#fw-nav-settings").click(function(t){e("#fw-nav-steps").toggleClass("nav-tab-active"),e("#fw-nav-settings").toggleClass("nav-tab-active"),e(ce).hide(),e(se).hide(),e(".fw-mail-settings-container").show()}),e("#fw-nav-steps").click(function(t){e("#fw-nav-steps").toggleClass("nav-tab-active"),e("#fw-nav-settings").toggleClass("nav-tab-active"),e(".fw-mail-settings-container").hide(),e(ce).show(),e(se).show()}),e("#fw-elements-modal").dialog({dialogClass:"wp-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,buttons:{Close:function(){e(this).dialog("close")}}})}catch(e){a(e)}})}(jQuery);